
<!DOCTYPE html>
<html>
<head>
    <title>Code Grapher Agent Flow</title>
    <script src="https://unpkg.com/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        .status { background: #f0f8ff; padding: 15px; border-radius: 5px; margin: 20px 0; }
        .diagram { border: 1px solid #ddd; padding: 20px; margin: 20px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ü§ñ Code Grapher Agent Pipeline Flow</h1>
        
        <div class="status">
            <h3>üìä Current Status</h3>
            <ul>
                <li><strong>Pipeline Runs:</strong> 6</li>
                <li><strong>Agent Runs:</strong> 8</li>
                <li><strong>Recent Agents:</strong> graph-builder, entity-extractor, code-parser</li>
                <li><strong>MLflow Dashboard:</strong> <a href="http://localhost:5002">http://localhost:5002</a></li>
            </ul>
        </div>
        
        <div class="diagram">
            <h3>üîÑ Agent Pipeline Flow</h3>
            <div class="mermaid">
                
graph TD
    %% Code Grapher Agent Pipeline Flow
    START([Start: Source Code]) --> PARSE[Code Parser Agent]
    PARSE --> EXTRACT[Entity Extraction Agent]
    EXTRACT --> RELATE[Relationship Analysis Agent]
    RELATE --> GRAPH[Graph Builder Agent]
    GRAPH --> RAG[RAG Indexer Agent]
    RAG --> END([End: Knowledge Graph + Vector Index])

    %% Data Flow
    PARSE -.->|AST Objects| EXTRACT
    EXTRACT -.->|Entities| RELATE
    RELATE -.->|Relationships| GRAPH
    GRAPH -.->|Graph Nodes| RAG

    %% Storage Systems
    GRAPH --> NEO4J[(Neo4j Database)]
    RAG --> CHROMA[(ChromaDB Vector Store)]

    %% Retrieval Flow
    QUERY([User Query]) --> HYBRID{Hybrid Retrieval}
    HYBRID --> GRAPH_SEARCH[Graph Query]
    HYBRID --> VECTOR_SEARCH[Vector Search]
    GRAPH_SEARCH --> NEO4J
    VECTOR_SEARCH --> CHROMA
    NEO4J --> COMBINE[Combine Results]
    CHROMA --> COMBINE
    COMBINE --> LLM[Gemini Flash LLM]
    LLM --> ANSWER([Generated Answer])

    %% Styling
    classDef agent fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef storage fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef process fill:#fff3e0,stroke:#e65100,stroke-width:2px
    classDef endpoint fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px

    class PARSE,EXTRACT,RELATE,GRAPH,RAG agent
    class NEO4J,CHROMA storage
    class HYBRID,COMBINE,LLM process
    class START,END,QUERY,ANSWER endpoint


            </div>
        </div>
        
        <div class="status">
            <h3>‚ÑπÔ∏è Flow Explanation</h3>
            <ol>
                <li><strong>Code Parser:</strong> Reads source files and creates AST representations</li>
                <li><strong>Entity Extractor:</strong> Identifies classes, functions, variables from AST</li>
                <li><strong>Relationship Analyzer:</strong> Finds connections between code entities</li>
                <li><strong>Graph Builder:</strong> Creates knowledge graph in Neo4j database</li>
                <li><strong>RAG Indexer:</strong> Creates vector embeddings for semantic search</li>
            </ol>
            
            <h4>üîç Retrieval Process:</h4>
            <p>When you query the system, it uses <strong>hybrid retrieval</strong> combining:</p>
            <ul>
                <li><strong>Graph queries</strong> for structural relationships</li>
                <li><strong>Vector search</strong> for semantic similarity</li>
                <li><strong>LLM generation</strong> for human-readable answers</li>
            </ul>
        </div>
    </div>
    
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
</body>
</html>
        